<?xml version="1.0"?> 
<!DOCTYPE workflow
[
 <!ENTITY CYCLE_TIME "@Y@m@d@H">
]>

<workflow realtime="f" scheduler="sge" cyclelifespan="0:01:00:00" cyclethrottle="10" corethrottle="5" taskthrottle="5">

  <log verbosity="0">/home/harrop/workflowmgr_dev/test/<cyclestr offset="2:00:00">test_@Y@m@d@H@M.log</cyclestr></log>

  <cycledef group="group1">201101010000 201201010000 1:00:00:00</cycledef>

  <metatask>

    <var id="x">1 2 3 4 5 6 7 8 9 10</var>

    <task name="test#x#" maxtries="3" cycledefs="group1">

      <command><cyclestr offset="-1:00:00">/home/harrop/test/bin/test_a.ksh -d @Y-@m-@d_@X @p</cyclestr></command>

      <account>jetmgmt</account>

      <queue>nserial</queue>

      <cores>1</cores>

      <walltime>00:00:10</walltime>

      <join>/home/harrop/test/log/test_#x#.join</join>

      <memory>512M</memory>

      <jobname>test#x#</jobname>

      <native>-cwd</native>

      <envar>
        <name>START_TIME</name><value><cyclestr>@Y@m@d@H</cyclestr></value>
      </envar>

      <dependency>
        <some threshold="0.5">
          <datadep>/lfs1/jetmgmt/harrop/test/test1.dat</datadep>
          <datadep>/lfs1/jetmgmt/harrop/test/test2.dat</datadep>
          <datadep>/lfs1/jetmgmt/harrop/test/test3.dat</datadep>
        </some>
      </dependency>

    </task>

  </metatask>

</workflow>
